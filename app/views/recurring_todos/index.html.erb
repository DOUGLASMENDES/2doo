<div id="display_box">
  <div class="container recurring_todos">
    <h2>Recurring todos</h2>
    <div id="recurring_todos_container">
      <div id="recurring-todos-empty-nd" style="<%= @no_recurring_todos ? 'display:block' : 'display:none'%>">
        <div class="message"><p>Currently there are no recurring todos</p></div>
      </div>
      <%= render :partial => "recurring_todo", :collection => @recurring_todos %>
    </div>
  </div>
  
  <div class="container recurring_todos_done">
    <h2>Recurring todos that are completed</h2>
    <div id="completed_recurring_todos_container">
      <div id="completed-empty-nd" style="<%= @no_completed_recurring_todos ? 'display:block' : 'display:none'%>">
        <div class="message"><p>Currently there are no completed recurring todos</p></div>
      </div>
      <%= render :partial => "recurring_todo", :collection => @completed_recurring_todos %>
    </div>
  </div>
</div>
<div id="input_box">
  <div id="recurring_new_container">
    <a href='#' onclick="$('new-recurring-todo').show();$('edit-recurring-todo').hide();TracksForm.toggle_overlay()"><%= image_tag("add.png", {:alt => "[ADD]"})-%>Add a new recurring action</a> 
  </div>
</div>

<div id="overlay">
  <div id="new-recurring-todo" class="new-form">
    <label>Add new recurring action</label><br/>
    <%= render :partial => "recurring_todo_form" %>
  </div>
  <div id="edit-recurring-todo" class="edit-form"  style="display:none">
    <div class='placeholder'>This should not be visible</div>
  </div>
</div><% 

# need to add behaviour for edit form here. Behaviour defined in partials are 
# not generated for
apply_behaviour "#recurring_edit_period:click", 
  "TracksForm.hide_all_edit_recurring(); $('recurring_edit_'+TracksForm.get_edit_period()).show();" 
-%>

<script type="text/javascript">
    window.onload=function(){
        Nifty("div#recurring_new_container","normal");
    }
</script>
